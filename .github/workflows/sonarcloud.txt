# .github/workflows/sonarcloud.yml

name: SonarCloud analysis

on:
  push:
    branches: [ "containers-ecs" ]
  pull_request:
    branches: [ "containers-ecs" ]
  workflow_dispatch: {}

permissions:
  contents: read
  pull-requests: read
  id-token: write

jobs:
  Analysis:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          fetch-depth: 0 

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Run SonarCloud Analysis
        uses: SonarSource/sonarcloud-github-action@v2.2 # Usar a tag de versão é recomendado
        env:
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
        with:
          # Cada argumento SonarScanner deve ser um item separado na lista
          args:
              -Dsonar.projectKey=HaylenoHossoe_pokedex-gui
              -Dsonar.organization=haylenohossoe # AGORA CORRIGIDO E SEM COMENTÁRIOS NA LINHA DO VALOR
            # -Dsonar.sources=. # Exemplo: remova o '#' para ativar
            # -Dsonar.tests=src # Exemplo: remova o '#' para ativar
            # -Dsonar.test.inclusions=**/*.test.js,**/*.test.jsx # Exemplo: remova o '#' para ativar
          projectBaseDir: .